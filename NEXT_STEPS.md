# 다음 단계 가이드

## 1. 테스트 테넌트 및 사용자 생성

### 방법 1: SQL로 직접 생성 (빠름)

Supabase SQL Editor에서 다음 파일 실행:
**`supabase/migrations/CREATE_TEST_TENANT.sql`**

이 스크립트는:
- "테스트" 테넌트 생성
- test@o2pluss.com 사용자 생성 (비밀번호: test123)
- 사용자를 테넌트에 customer 역할로 연결

### 방법 2: 관리자 화면에서 생성

1. `/admin/tenants` 접속
2. "새 테넌트 생성"에서 이름: "테스트" 입력
3. `/admin/users` 접속
4. "새 사용자 생성":
   - 이메일: `test@o2pluss.com`
   - 비밀번호: `test123`
   - 이름: `테스트 사용자`
   - 테넌트: "테스트" 선택
   - 역할: "고객" 선택

## 2. 테스트 사용자로 로그인

1. 로그아웃 (현재 운영자 계정)
2. 로그인 페이지에서:
   - 이메일: `test@o2pluss.com`
   - 비밀번호: `test123`
3. 로그인 후 `/app` 대시보드 확인

## 3. 테스트 데이터 추가

### 자산 추가
1. 운영자 계정으로 로그인
2. `/admin/assets` 접속
3. "새 자산 생성":
   - 테넌트: "테스트" 선택
   - 제조사, 모델, 시리얼 등 입력
   - EOS/EOL 날짜 설정 (만료 임박 테스트용)

### 계약 추가
1. `/admin/contracts` (또는 직접 SQL로)
2. 테스트 테넌트에 계약 생성
3. 자산과 연결 (contract_items)

### 보고서 업로드
1. `/admin/reports` 접속
2. 테스트 테넌트 선택
3. 점검 생성 및 PDF 업로드

## 4. RLS 정책 테스트

### 테스트 시나리오

1. **고객 A로 로그인 → 고객 B 데이터 접근 시도**
   - test@o2pluss.com으로 로그인
   - 다른 테넌트의 자산/보고서 URL 직접 접근
   - 403 에러 또는 빈 데이터 확인

2. **운영자 권한 확인**
   - admin@o2pluss.com으로 로그인
   - 모든 테넌트의 데이터 조회 가능 확인

## 5. Storage 버킷 설정

Supabase 대시보드 > Storage에서:
1. "Create Bucket" 클릭
2. 버킷 이름: `reports`
3. **Public bucket: 체크 해제** (비공개)
4. File size limit: 10MB
5. "Create bucket" 클릭

## 6. 완료 체크리스트

- [ ] 테스트 테넌트 생성
- [ ] 테스트 사용자 생성 및 로그인 확인
- [ ] 자산 추가 (최소 1개)
- [ ] 계약 추가 (최소 1개)
- [ ] 보고서 업로드 테스트
- [ ] RLS 정책 테스트 (고객 간 격리 확인)
- [ ] 운영자 권한 테스트
- [ ] Storage 버킷 생성

## 7. 운영 준비

모든 테스트가 완료되면:
1. 초기 운영자 비밀번호 변경
2. 실제 고객사 데이터 입력
3. 사용자 계정 생성



